<html>

<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
</head>
<script>
    var data = { "时间列表": [{ "日期": "6-29", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "6-30", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "6-31", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-01", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-02", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-03", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-04", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-05", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-06", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-07", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-08", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-09", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-10", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-11", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-12", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-13", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-14", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-15", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-16", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-17", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-18", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-19", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-20", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-21", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-22", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-23", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-24", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-25", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-26", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }, { "日期": "7-27", "停靠次数": "4", "楼层分布": [{ "楼层": "4", "百分率": "25%" }, { "楼层": "7", "百分率": "25%" }, { "楼层": "16", "百分率": "50%" }] }], "总楼层": "27", "楼层可信度": [{ "楼层": "4", "百分率": "40%" }, { "楼层": "7", "百分率": "40%" }, { "楼层": "16", "百分率": "75%" }] }

</script>

<style>

</style>

<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1800px;height:700px;margin:auto"></div>
    <script type="text/javascript">
        var arr = [];
        var obj = {};
        var arrobj = [];

        // obj = {
        //     xAxis: 0, yAxis: 1.5, value: "30%", symbol: 'rect', symbolSize: function (val) {
        //         return [1500 / arr.length * 0.8, 800 / data['总楼层'] * 0.8]
        //     }, itemStyle: { normal: {} }
        // },
        data['时间列表'].forEach(function (item) {
            var str = item['日期'] + '(' + item['停靠次数'] + ')'
            arr.push(str);
            if (item['楼层分布'].length > 0) {
                item['楼层分布'].forEach(function (itemson) {
                    obj = {
                        xAxis: str, yAxis: Number(itemson['楼层']) - 0.5, value: itemson['百分率'], symbol: 'rect', symbolSize: function (val) {
                            return [1500 / arr.length * 0.8, 800 / data['总楼层'] * 0.8]
                        }, itemStyle: { normal: {} }
                    }
                    arrobj.push(obj);
                })
            }
        })
        console.log(arrobj);

        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        var img = new Image(); //新建对象
        img.src ="http://b.hiphotos.baidu.com/baike/c0%3Dbaike60%2C5%2C5%2C60%2C20%3Bt%3Dgif/sign=69d4876c4134970a537e187df4a3baad/6c224f4a20a44623c8f0ea219822720e0cf3d7bf.jpg";

        // 指定图表的配置项和数据
        option = {
            gird:{
                width：1800；
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    show: true,
                    type: 'cross',
                    lineStyle: {
                        type: 'dashed',
                        width: 1
                    }
                }
            },
            title: {
                top: 0,
                left: 'center',
                text: '新岑四路2号'
            },
            legend: {
                data: ['停靠百分率'],
                left: "center",
                bottom: 20,
            },

            xAxis: [
                {
                    type: 'category',
                    axisLabel: {
                        interval: 0
                    },
                    splitNumber: data['总楼层'],
                    axisTick: {
                        show: false,
                    },
                    data: arr,
                    splitLine: {
                        show: true,
                    },
                    position: "top",



                }
            ],
            yAxis: [
                {
                    type: 'value',
                    splitNumber: Number(data['总楼层'])+1,
                    inverse: true,
                    axisTick: {
                        show: false,
                    },
                    max: Number(data['总楼层']) ,
                    min: 1,
                    axisLabel: {
                        verticalAlign: "right",
                        padding: [8, 0, 0, 0]
                    }
                }
            ],
            series: [
                {
                    name: '停靠百分率',
                    type: 'scatter',
                    symbol: 'rect', //'circle', 'rectangle', 'triangle', 'diamond', 'emptyCircle', 'emptyRectangle', 'emptyTriangle', 'emptyDiamond'

                    color: 'lightgreen',
                    itemStyle: {
                        normal: {
                            color: 'lightblue',
                            borderWidth: 4,
                            label: { show: true }
                        },
                    },
                    symbol: "rect",
                    symbolSize: function (val) {
                        return 1500 / arr.length;
                    },

                    markPoint: {
                        data: arrobj
                    },

                }

            ]
        };


        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
</body>

</html>